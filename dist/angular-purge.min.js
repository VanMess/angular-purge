!function(r){"function"==typeof define&&define.amd?define(["angular"],r):r(window.angular)}(function(r){"use strict";function n(n,t,e){return{request:function(u){var i=null,o=t.requestFormatProperty;return r.isObject(u.data)&&u.hasOwnProperty(o)&&(r.isFunction(u[o])?(i=u[o],u.data=i(u.data)):r.isString(u[o])&&(i=e(u[o]+""),r.isObject(i)&&r.isFunction(i.parse)&&(u.data=i.parse(u.data)))),n.when(u)},response:function(u){var i=null,o=t.responseFormatProperty,a=u.config;return a.hasOwnProperty(o)&&(r.isFunction(a[o])?(i=a[o],u.data=i(u.data)):r.isString(a[o])&&(i=e(a[o]),r.isObject(i)&&r.isFunction(i.parse)&&(u.data=i.parse(u.data)))),n.when(u)}}}var t="vgPurge";r.module(t,[]),r.module(t).provider("purge.config",function(){var n={requestFormatProperty:"paramFormat",responseFormatProperty:"dataFormat"},t={$set:function(t){r.extend(n,t)},$get:function(){return n}};return t}),Object.keys=Object.keys||function(){var r=Object.prototype.hasOwnProperty,n="propertyIsEnumerable,isPrototypeOf,hasOwnProperty,toLocaleString,toString,valueOf,constructor".split(",");return function(t){var e,u=[];for(e in t)r.call(t,e)&&u.push(e);if(n&&t)for(var i=0;i<n.length;i++)e=n[i++],r.call(t,e)&&u.push(e);return u}}(),r.module(t).provider("purge.enumParser",[function(){function n(r,n){for(var t=Object.keys(r),e=0;e<t.length;e++)if(r.hasOwnProperty(e)&&r[e]===n)return e;return null}var t="default",e={},u={$reg:function(n,t){var u;r.isObject(n)?u=n:(u={},u[n]=t),r.forEach(u,function(r,n,t){e[n]=t})},$get:function(){return function(r,u){var i;return i=u.hasOwnProperty("enum")?function(i){var o,a=r(i);return e.hasOwnProperty(u["enum"])&&(o=e[u["enum"]],a=u.enumReverse?n(o,a):o.hasOwnProperty(a)?o[a]:o[t]),a}:r}}};return u}]).run(["purge.parsers","purge.enumParser",function(r,n){r.push(n)}]),r.module(t).provider("purge.typeParser",[function(){var n={string:function(r){return r+""},"int":function(r){return+r},"float":function(r){return+r},date:function(r){return new Date(r)},bool:function(r){return r&&!0}},t={$reg:function(t,e){var u;r.isObject(t)?u=t:(u={},u[t]=e),r.forEach(u,function(r,t,e){n[t]=e})},$get:function(){return function(t,e){var u,i=r.isFunction(e)?e:e.formatter;return u=r.isFunction(i)?function(r){var n=t(r);return i(n,e.format)}:r.isString(e.formatter)&&r.isFunction(n[e.formatter])?function(r){var u=t(r);return n[e.formatter](u,e.format)}:t}}};return t}]).run(["purge.parsers","purge.typeParser",function(r,n){r.unshift(n)}]),r.module(t).factory("purge.parsers",[function(){var n=[function(r,n){var t,u;return n.hasOwnProperty("child")?(u=new e(n.child),t=function(n){var t=r(n);return null===t?t:u.parse(t)}):t=r,t},function(n,t){var e;return e=t.hasOwnProperty("defaults")?function(e){var u=n(e);return(r.isUndefined(u)||u+""=="null")&&(u=r.copy(t.defaults)),u}:n}],t={unshift:function(t){r.isFunction(t)&&n.unshift(t)},push:function(t){r.isFunction(t)&&n.push(t)},get:function(){return n}};return t}]),r.module(t).provider("purge",[function(){var n={$reg:function(t,e){var i;return r.isObject(t)?i=t:(i={},i[t+""]=e),r.forEach(i,function(r,n){u(n,r)}),n},$get:["purge.parsers",function(r){return e.setChannels(r.get()),u.$$init(),u.get}]};return n}]);var e=function(){function n(r){i=r}function t(r){var n=Object.prototype.hasOwnProperty,t=Object.prototype.toString;return null==r?!0:r+""=="undefined"?!0:n.call(r,"length")&&("[object Array]"===t.call(r)||"[object String]"===t.call(r)||n.call(r,"callee"))?0===r.length:0===Object.keys(r).length}function e(n,e){var u=null;if(!r.isString(e)||t(e))return n;if(r.isObject(n)){e=e.split("."),u=n;for(var i=0;i<e.length;i++){if(!r.isObject(u)||!u.hasOwnProperty(e[i]))return void 0;u=u[e[i]]}return u}return n}function u(n){var t=null;return t=function(r){return e(r,n.mapping)},r.forEach(i,function(r){t=r(t,n)}),t}var i,o=function(n){if(this._parsers={},r.isFunction(n))this._parsers=n;else for(var t in n)this._parsers[t]=r.isFunction(n[t])?n[t]:u(n[t])};return o.prototype={parse:function(n){var t;if(r.isArray(n)){t=[];for(var e=0;e<n.length;e++)t.push(this.$$parse(n[e]))}else t=this.$$parse(n);return t},$$parse:function(n){var t={};if(r.isFunction(this._parsers))t=this._parsers(n);else for(var e in this._parsers)t[e]=this._parsers[e](n);return t}},o.setChannels=n,o}(),u=function(){var n={},t=function(n){var t={};if(r.isFunction(n))t=n;else for(var e in n)r.isUndefined(n[e])||(t[e]=u(e,n[e]));return t},u=function(n,e){var u,i={type:"auto"};return r.isString(e)?u=r.extend({},i,{name:n,mapping:e}):r.isObject(e)&&(u=r.extend({},i,{name:n,mapping:n},e)),e&&e.hasOwnProperty("child")&&r.isObject(e.child)&&(u.child=t(e.child)),u},i=[],o=function(r,u){var o=function(r,u){return function(){var i=r,o=t(u);return n.hasOwnProperty(i),n[i]=new e(o),n[i].id=i,n[i]}}(r,u);i.push(o)};return o.get=function(r){return n[r]instanceof e?n[r]:void 0},o.remove=function(r){n[r]instanceof e&&(n[r]=void 0)},o.clear=function(){n={}},o.$$init=function(){r.forEach(i,function(r){r()}),i=[]},o}();r.module(t).config(["$httpProvider",function(r){r.interceptors.push(["$q","purge.config","purge",n])}])});