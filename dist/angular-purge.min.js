!function(r){"function"==typeof define&&define.amd?define(["angular"],r):r(window.angular),r(window.angular)}(function(r){"use strict";var n="vgPurge";r.module(n,[]).run(["purge.parsers",function(r){t.setChannels(r.get())}]),r.module(n).provider("purge.config",function(){var n={requestFormatProperty:"paramFormat",responseFormatProperty:"dataFormat"},t={$set:function(t){r.extend(n,t)},$get:function(){return n}};return t}),Object.keys=Object.keys||function(){var r=Object.prototype.hasOwnProperty,n="propertyIsEnumerable,isPrototypeOf,hasOwnProperty,toLocaleString,toString,valueOf,constructor".split(",");return function(t){var e=[];for(var u in t)r.call(t,u)&&e.push(u);if(n&&t)for(var o=0;u=n[o++];)r.call(t,u)&&e.push(u);return e}}(),r.module(n).provider("purge.enumParser",[function(){function n(r,n){for(var t=Object.keys(r),e=0;e<t.length;e++)if(r.hasOwnProperty(e)&&r[e]===n)return e;return null}var t="default",e={},u={$reg:function(n){var t;r.isObject(n)?t=n:(t={},t[n]=transporter),r.forEach(t,function(r,n,t){e[n]=t})},$get:function(){return function(r,u){var o;return o=u.hasOwnProperty("enum")?function(o){var i,a=r(o);return e.hasOwnProperty(u["enum"])&&(i=e[u["enum"]],a=u.enumReverse?n(i,a):i.hasOwnProperty(a)?i[a]:i[t]),a}:r}}};return u}]).run(["purge.parsers","purge.enumParser",function(r,n){r.push(n)}]),r.module(n).provider("purge.typeParser",[function(){var n={string:function(r){return r+""},"int":function(r){return+r},"float":function(r){return+r},date:function(r){return new Date(r)},bool:function(r){return r&&!0}},t={$reg:function(t,e){var u;r.isObject(t)?u=t:(u={},u[t]=e),r.forEach(u,function(r,t,e){n[t]=e})},$get:function(){return function(r,n){var t,e=_.isFunction(n)?n:n.formatter;return t=_.isFunction(e)?function(t){var u=r(t);return e(u,n.format)}:_.isString(n.formatter)&&_.isFunction(transporter[n.formatter])?function(t){var e=r(t);return transporter[n.formatter](e,n.format)}:r}}};return t}]).run(["purge.parsers","purge.typeParser",function(r,n){r.unshift(n)}]),r.module(n).factory("purge.parsers",[function(){var n=[function(r,n){var t,e;return n.hasOwnProperty("child")?(e=new Model(n.child),t=function(n){var t=r(n);return null===t?t:e.parse(t)}):t=r,t},function(n,t){var e;return e=t.hasOwnProperty("defaults")?function(e){var u=n(e);return(_.isUndefined(u)||_.isNull(u))&&(u=r.copy(t.defaults)),u}:n}],t={unshift:function(t){r.isFunction(t)&&n.unshift(t)},push:function(t){r.isFunction(t)&&n.push(t)},get:function(){return n}};return t}]),r.module(n).provider("purge",["purge.helper",function(n){var t={$reg:function(t,e){var u;r.isObject(t)?u=t:(u={},u[t+""]=e),r.forEach(u,function(r,t,e){n(t,e)})},$get:function(){return n.get}};return t}]);var t=function(){function n(r){o=r}function t(){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;return null==obj?!0:obj+""=="undefined"?!0:r.call(obj,"length")&&("[object Array]"===n.call(obj)||"[object String]"===n.call(obj)||r.call(obj,"callee"))?0===obj.length:0===Object.keys(obj).length}function e(n,e){var u=null;if(!r.isString(e)||t(e))return n;if(r.isObject(n)){e=e.split("."),u=n;for(var o=0;o<e.length;o++){if(!r.isObject(u)||!u.hasOwnProperty(e[o]))return void 0;u=u[e[o]]}return u}return n}function u(n){var t=null;return t=function(r){return e(r,n.mapping)},r.forEach(o,function(r){t=r(t,n)}),t}var o,i=function(r){this._parser=_.isFunction(r)?r:u(r)};return i.prototype={parse:function(r){var n;if(_.isArray(r)){n=[];for(var t=0;t<r.length;t++)n.push(this._parser(r[t]))}else n=this._parser(r);return n}},i.setChannels=n,i}();r.module(n).factory("purge.helper",[function(){var n={},e=function(n){var t={};return t=r.isFunction(n)?n:u(n)},u=function(n,t){var u,o={type:"auto"};return _.isString(t)?u=_.extend({},o,{mapping:t}):_.isObject(t)&&(u=_.extend({},o,t)),t.hasOwnProperty("child")&&r.isObject(t.child)&&(u.child=e(t.child)),u},o=function(r){var u=name,o=e(name,r);return n.hasOwnProperty(u),n[u]=new t(o),n[u].id=u,n[u]};return o.get=function(r){return n[r]instanceof Model?n[r]:void 0},o.remove=function(r){n[r]instanceof Model&&(n[r]=void 0)},o.clear=function(){n={}},o}]),r.module(n).factory("purge.interceptor",[function(){var n=function(n,t,e){return{request:function(u){var o=null,i=t.requestFormatProperty;return r.isObject(u.data)&&u.hasOwnProperty(i)&&(r.isFunction(u[i])?(o=u[i],u.data=o(u.data)):r.isString(u[i])&&(o=e(u[i]+""),r.isObject(o)&&r.isFunction(o.parse)&&(u.data=o.parse(u.data)))),n.when(u)},response:function(u){var o=null,i=t.responseFormatProperty,a=u.config;return a.hasOwnProperty(i)&&(r.isFunction(a[i])?(o=a[i],u.data=o(u.data)):r.isString(a[i])&&(o=e(a[i]),r.isObject(o)&&r.isFunction(o.parse)&&(u.data=o.parse(u.data)))),n.when(u)}}};return["$q","purge.config","purge",n]}]).config(["$httpProvider",function(r){r.interceptors.push("purge.interceptor")}])});